<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QRã‚³ãƒ¼ãƒ‰ - ã‚»ãƒŸãƒŠãƒ¼äºˆç´„ã‚·ã‚¹ãƒ†ãƒ </title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container admin-container">
        <header>
            <h1>QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ</h1>
            <a href="/admin" class="back-link">â† ç®¡ç†ç”»é¢ã«æˆ»ã‚‹</a>
        </header>
        
        <main>
            <section class="qr-section">
                <div class="qr-info">
                    <h2>ã‚¤ãƒ™ãƒ³ãƒˆäºˆç´„ç”¨QRã‚³ãƒ¼ãƒ‰</h2>
                    <p class="qr-description">
                        ã“ã®QRã‚³ãƒ¼ãƒ‰ã‚’ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§èª­ã¿å–ã‚‹ã¨ã€ã‚¤ãƒ™ãƒ³ãƒˆäºˆç´„ãƒšãƒ¼ã‚¸ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚
                    </p>
                </div>
                
                <div class="qr-container">
                    <div class="qr-code">
                        <img src="<%= qrCodeUrl %>" alt="QRã‚³ãƒ¼ãƒ‰" />
                    </div>
                    
                    <div class="qr-details">
                        <h3>URL</h3>
                        <div class="url-box">
                            <input type="text" value="<%= url %>" readonly id="urlInput">
                            <button onclick="copyURL()" class="copy-btn">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        
                        <div class="qr-actions">
                            <button onclick="downloadQR()" class="action-btn download-btn">ğŸ“¥ QRã‚³ãƒ¼ãƒ‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                            <button onclick="printQR()" class="action-btn print-btn">ğŸ–¨ï¸ å°åˆ·</button>
                            <a href="<%= url %>" target="_blank" class="action-btn preview-btn">ğŸ‘ï¸ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</a>
                        </div>
                    </div>
                </div>
                
                <div class="usage-instructions">
                    <h3>ä½¿ç”¨æ–¹æ³•</h3>
                    <ol>
                        <li>QRã‚³ãƒ¼ãƒ‰ã‚’å°åˆ·ã¾ãŸã¯ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„</li>
                        <li>ã‚¤ãƒ™ãƒ³ãƒˆä¼šå ´ã‚„é…å¸ƒè³‡æ–™ã«QRã‚³ãƒ¼ãƒ‰ã‚’æ²è¼‰ã—ã¦ãã ã•ã„</li>
                        <li>å‚åŠ å¸Œæœ›è€…ãŒã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã‚Šã¾ã™</li>
                        <li>äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ ã«å¿…è¦äº‹é …ã‚’å…¥åŠ›ã—ã¦äºˆç´„å®Œäº†ã§ã™</li>
                    </ol>
                </div>
            </section>
        </main>
        
        <footer>
            <p>&copy; 2024 äºˆç´„ã‚·ã‚¹ãƒ†ãƒ </p>
        </footer>
    </div>
    
    <script>
        function copyURL() {
            const urlInput = document.getElementById('urlInput');
            urlInput.select();
            urlInput.setSelectionRange(0, 99999); // ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ
            
            try {
                document.execCommand('copy');
                showToast('URLãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã—ãŸï¼');
            } catch (err) {
                console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
                showToast('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
            }
        }
        
        function downloadQR() {
            const qrImage = document.querySelector('.qr-code img');
            const link = document.createElement('a');
            link.download = 'event_qr_code_<%= eventId %>.png';
            link.href = qrImage.src;
            link.click();
        }
        
        function printQR() {
            window.print();
        }
        
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }
    </script>
    
    <style>
        @media print {
            .back-link, .qr-actions, .usage-instructions, footer {
                display: none !important;
            }
            
            .qr-container {
                text-align: center;
            }
            
            .qr-code img {
                max-width: 300px;
            }
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 24px;
            border-radius: 4px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast-success {
            background-color: #28a745;
        }
        
        .toast-error {
            background-color: #dc3545;
        }
    </style>
</body>
</html>